{% extends 'base.html' %}
{% block content %}
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
table {
  border-collapse: collapse;
  border-spacing: 0;
  width: 100%;
  border: 1px solid #ddd;
}

th, td {
  text-align: left;
  padding: 8px;
}

tr:nth-child(even){background-color: #f2f2f2}
</style>


<div class="breadcrumbs">
    <div class="col-sm-12">
        <h3><b>Vehicle MasterList</b></h3>
    </div>
</div>
<div class="content mt-3">
    <div class="animated fadeIn">
        <div class="row">
            <div class="col-md-12">
                <div class="card">
                <div class="card-header">
                  <a href="{% url 'vehiclelist_export' %}"> <u>Export VehicleList </u></a>
                    <a href="{% url 'vehicle_new' %}" style="float:right"><u>Add Vehicle Masterlist</u></a>
                </div>
                <!-- <table id="example" class="table table-striped table-bordered dt-responsive nowrap" style="width:100%"> -->
                    <table id="albums" class="table table-striped table-bordered" style="width:100%" data-server-side="true" data-ajax="/api/masterlist/?format=datatables">
                    <thead>
                        <tr>

                            <th>Activity No</th>
                            <th>NO</th>
                            <th>Plate Number</th>
                            <th>Conductions Sticker No.:</th>
                            <th>CR Name:</th>
                        </tr>
                    </thead>
                    <!-- <tbody>
                        {% for Vmaster in object_list %}
                        <tr class="odd gradeX">
                            <td><a href="{% url 'vehicle-details' Vmaster.id %}"><u>{{ Vmaster.Activity_Id }}</u></a></td>
                            <td>{{ Vmaster.NO }}</td>
                            <td>{{ Vmaster.PLATE_NO }}</td>
                            <td>{{ Vmaster.CS_NO }}</td>
                            <td>{{ Vmaster.CR_NAME }}</td>
                            <td>{{ Vmaster.PLATE_ENDING}}</td>
                            <td>{{ Vmaster.REGISTRATION_MONTH}}</td>
                            <td>{{ Vmaster.MODEL }}</td>
                            <td>{{ Vmaster.BRAND }}</td>
                            <td>{{ Vmaster.VEHICLE_MAKE}}</td>
                            <td>{{ Vmaster.ENGINE_NO}}</td>
                            <td>{{ Vmaster.VEHICLE_TYPE }}</td>
                            <td></td>
                            <form action="{% url 'vehicleMasterlist_delete' Vmaster.id %}" method="POST">
                                {% csrf_token %}
                                <td><button title= "Delete"  class="btn btn-danger btn-sm" type="submit" name="button"><span class="fa fa-trash"></span></button></td>
                            </form>
                        </tr>
                        {% endfor %}
                    </tbody> -->
                    </table>
                  </div>
                </div>
            </div>
        </div>
    </div><!-- .animated -->
</div><!-- .content -->
{% endblock %}
{% block extra_js %}
<script>
$(document).ready(function() {
    var table = $('#albums').DataTable({
        "serverSide": true,
        "ajax": "/api/masterlist/?format=datatables",
        "columns": [
            {"data": "Activity_Id", "searchable": false},
            // Use dot notation to reference nested serializers.
            // This data: could alternatively be displayed with the serializer's ReadOnlyField as well, as seen in the minimal example.
            {"data": "NO"},
            {"data": "PLATE_NO"},
            {"data": "CS_NO"},
            {"data": "CR_NAME", "sortable": false},
        ]
    });
    // $('.btn-decade').on('click', function() {
    //     table.columns().search('');
    //     var rel = $(this).attr('rel');
    //     if (rel) {
    //         table.columns(3).search('^' + rel + '[0-9]$', true).draw();
    //     } else {
    //         table.draw();
    //     }
    // });
    // $('#albums_minimal').DataTable({
    //     "search": {"regex": true},
    //     "language": {"searchPlaceholder": "regular expression"}
    // });
});
</script>
{% endblock %}


